{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WriteConcern = exports.WRITE_CONCERN_KEYS = void 0;\nexports.WRITE_CONCERN_KEYS = ['w', 'wtimeout', 'j', 'journal', 'fsync'];\n/**\n * A MongoDB WriteConcern, which describes the level of acknowledgement\n * requested from MongoDB for write operations.\n * @public\n *\n * @see https://docs.mongodb.com/manual/reference/write-concern/\n */\n\nclass WriteConcern {\n  /**\n   * Constructs a WriteConcern from the write concern properties.\n   * @param w - request acknowledgment that the write operation has propagated to a specified number of mongod instances or to mongod instances with specified tags.\n   * @param wtimeout - specify a time limit to prevent write operations from blocking indefinitely\n   * @param j - request acknowledgment that the write operation has been written to the on-disk journal\n   * @param fsync - equivalent to the j option\n   */\n  constructor(w, wtimeout, j, fsync) {\n    if (w != null) {\n      if (!Number.isNaN(Number(w))) {\n        this.w = Number(w);\n      } else {\n        this.w = w;\n      }\n    }\n\n    if (wtimeout != null) {\n      this.wtimeout = wtimeout;\n    }\n\n    if (j != null) {\n      this.j = j;\n    }\n\n    if (fsync != null) {\n      this.fsync = fsync;\n    }\n  }\n  /** Construct a WriteConcern given an options object. */\n\n\n  static fromOptions(options, inherit) {\n    if (options == null) return undefined;\n    inherit = inherit !== null && inherit !== void 0 ? inherit : {};\n    let opts;\n\n    if (typeof options === 'string' || typeof options === 'number') {\n      opts = {\n        w: options\n      };\n    } else if (options instanceof WriteConcern) {\n      opts = options;\n    } else {\n      opts = options.writeConcern;\n    }\n\n    const parentOpts = inherit instanceof WriteConcern ? inherit : inherit.writeConcern;\n    const {\n      w = undefined,\n      wtimeout = undefined,\n      j = undefined,\n      fsync = undefined,\n      journal = undefined,\n      wtimeoutMS = undefined\n    } = { ...parentOpts,\n      ...opts\n    };\n\n    if (w != null || wtimeout != null || wtimeoutMS != null || j != null || journal != null || fsync != null) {\n      return new WriteConcern(w, wtimeout !== null && wtimeout !== void 0 ? wtimeout : wtimeoutMS, j !== null && j !== void 0 ? j : journal, fsync);\n    }\n\n    return undefined;\n  }\n\n}\n\nexports.WriteConcern = WriteConcern;","map":{"version":3,"sources":["../src/write_concern.ts"],"names":[],"mappings":";;;;;;AA2Ba,OAAA,CAAA,kBAAA,GAAqB,CAAC,GAAD,EAAM,UAAN,EAAkB,GAAlB,EAAuB,SAAvB,EAAkC,OAAlC,CAArB;AAEb;;;;;;AAMG;;AACH,MAAa,YAAb,CAAyB;EAUvB;;;;;;AAMG;EACH,WAAA,CAAY,CAAZ,EAAmB,QAAnB,EAAsC,CAAtC,EAAmD,KAAnD,EAAsE;IACpE,IAAI,CAAC,IAAI,IAAT,EAAe;MACb,IAAI,CAAC,MAAM,CAAC,KAAP,CAAa,MAAM,CAAC,CAAD,CAAnB,CAAL,EAA8B;QAC5B,KAAK,CAAL,GAAS,MAAM,CAAC,CAAD,CAAf;MACD,CAFD,MAEO;QACL,KAAK,CAAL,GAAS,CAAT;MACD;IACF;;IACD,IAAI,QAAQ,IAAI,IAAhB,EAAsB;MACpB,KAAK,QAAL,GAAgB,QAAhB;IACD;;IACD,IAAI,CAAC,IAAI,IAAT,EAAe;MACb,KAAK,CAAL,GAAS,CAAT;IACD;;IACD,IAAI,KAAK,IAAI,IAAb,EAAmB;MACjB,KAAK,KAAL,GAAa,KAAb;IACD;EACF;EAED;;;EACkB,OAAX,WAAW,CAChB,OADgB,EAEhB,OAFgB,EAE4B;IAE5C,IAAI,OAAO,IAAI,IAAf,EAAqB,OAAO,SAAP;IACrB,OAAO,GAAG,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAA,OAAA,GAAW,EAArB;IACA,IAAI,IAAJ;;IACA,IAAI,OAAO,OAAP,KAAmB,QAAnB,IAA+B,OAAO,OAAP,KAAmB,QAAtD,EAAgE;MAC9D,IAAI,GAAG;QAAE,CAAC,EAAE;MAAL,CAAP;IACD,CAFD,MAEO,IAAI,OAAO,YAAY,YAAvB,EAAqC;MAC1C,IAAI,GAAG,OAAP;IACD,CAFM,MAEA;MACL,IAAI,GAAG,OAAO,CAAC,YAAf;IACD;;IACD,MAAM,UAAU,GACd,OAAO,YAAY,YAAnB,GAAkC,OAAlC,GAA4C,OAAO,CAAC,YADtD;IAGA,MAAM;MACJ,CAAC,GAAG,SADA;MAEJ,QAAQ,GAAG,SAFP;MAGJ,CAAC,GAAG,SAHA;MAIJ,KAAK,GAAG,SAJJ;MAKJ,OAAO,GAAG,SALN;MAMJ,UAAU,GAAG;IANT,IAOF,EACF,GAAG,UADD;MAEF,GAAG;IAFD,CAPJ;;IAWA,IACE,CAAC,IAAI,IAAL,IACA,QAAQ,IAAI,IADZ,IAEA,UAAU,IAAI,IAFd,IAGA,CAAC,IAAI,IAHL,IAIA,OAAO,IAAI,IAJX,IAKA,KAAK,IAAI,IANX,EAOE;MACA,OAAO,IAAI,YAAJ,CAAiB,CAAjB,EAAoB,QAAQ,KAAA,IAAR,IAAA,QAAQ,KAAA,KAAA,CAAR,GAAA,QAAA,GAAY,UAAhC,EAA4C,CAAC,KAAA,IAAD,IAAA,CAAC,KAAA,KAAA,CAAD,GAAA,CAAA,GAAK,OAAjD,EAA0D,KAA1D,CAAP;IACD;;IACD,OAAO,SAAP;EACD;;AA5EsB;;AAAzB,OAAA,CAAA,YAAA,GAAA,YAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteConcern = exports.WRITE_CONCERN_KEYS = void 0;\nexports.WRITE_CONCERN_KEYS = ['w', 'wtimeout', 'j', 'journal', 'fsync'];\n/**\n * A MongoDB WriteConcern, which describes the level of acknowledgement\n * requested from MongoDB for write operations.\n * @public\n *\n * @see https://docs.mongodb.com/manual/reference/write-concern/\n */\nclass WriteConcern {\n    /**\n     * Constructs a WriteConcern from the write concern properties.\n     * @param w - request acknowledgment that the write operation has propagated to a specified number of mongod instances or to mongod instances with specified tags.\n     * @param wtimeout - specify a time limit to prevent write operations from blocking indefinitely\n     * @param j - request acknowledgment that the write operation has been written to the on-disk journal\n     * @param fsync - equivalent to the j option\n     */\n    constructor(w, wtimeout, j, fsync) {\n        if (w != null) {\n            if (!Number.isNaN(Number(w))) {\n                this.w = Number(w);\n            }\n            else {\n                this.w = w;\n            }\n        }\n        if (wtimeout != null) {\n            this.wtimeout = wtimeout;\n        }\n        if (j != null) {\n            this.j = j;\n        }\n        if (fsync != null) {\n            this.fsync = fsync;\n        }\n    }\n    /** Construct a WriteConcern given an options object. */\n    static fromOptions(options, inherit) {\n        if (options == null)\n            return undefined;\n        inherit = inherit !== null && inherit !== void 0 ? inherit : {};\n        let opts;\n        if (typeof options === 'string' || typeof options === 'number') {\n            opts = { w: options };\n        }\n        else if (options instanceof WriteConcern) {\n            opts = options;\n        }\n        else {\n            opts = options.writeConcern;\n        }\n        const parentOpts = inherit instanceof WriteConcern ? inherit : inherit.writeConcern;\n        const { w = undefined, wtimeout = undefined, j = undefined, fsync = undefined, journal = undefined, wtimeoutMS = undefined } = {\n            ...parentOpts,\n            ...opts\n        };\n        if (w != null ||\n            wtimeout != null ||\n            wtimeoutMS != null ||\n            j != null ||\n            journal != null ||\n            fsync != null) {\n            return new WriteConcern(w, wtimeout !== null && wtimeout !== void 0 ? wtimeout : wtimeoutMS, j !== null && j !== void 0 ? j : journal, fsync);\n        }\n        return undefined;\n    }\n}\nexports.WriteConcern = WriteConcern;\n//# sourceMappingURL=write_concern.js.map"]},"metadata":{},"sourceType":"script"}