{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EstimatedDocumentCountOperation = void 0;\n\nconst command_1 = require(\"./command\");\n\nconst operation_1 = require(\"./operation\");\n/** @internal */\n\n\nclass EstimatedDocumentCountOperation extends command_1.CommandOperation {\n  constructor(collection) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(collection, options);\n    this.options = options;\n    this.collectionName = collection.collectionName;\n  }\n\n  execute(server, session, callback) {\n    const cmd = {\n      count: this.collectionName\n    };\n\n    if (typeof this.options.maxTimeMS === 'number') {\n      cmd.maxTimeMS = this.options.maxTimeMS;\n    } // we check for undefined specifically here to allow falsy values\n    // eslint-disable-next-line no-restricted-syntax\n\n\n    if (this.options.comment !== undefined) {\n      cmd.comment = this.options.comment;\n    }\n\n    super.executeCommand(server, session, cmd, (err, response) => {\n      if (err) {\n        callback(err);\n        return;\n      }\n\n      callback(undefined, (response === null || response === void 0 ? void 0 : response.n) || 0);\n    });\n  }\n\n}\n\nexports.EstimatedDocumentCountOperation = EstimatedDocumentCountOperation;\n(0, operation_1.defineAspects)(EstimatedDocumentCountOperation, [operation_1.Aspect.READ_OPERATION, operation_1.Aspect.RETRYABLE, operation_1.Aspect.CURSOR_CREATING]);","map":{"version":3,"sources":["../../src/operations/estimated_document_count.ts"],"names":[],"mappings":";;;;;;;AAKA,MAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,MAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;AAYA;;;AACA,MAAa,+BAAb,SAAqD,SAAA,CAAA,gBAArD,CAA6E;EAI3E,WAAA,CAAY,UAAZ,EAA+E;IAAA,IAA3C,OAA2C,uEAAF,EAAE;IAC7E,MAAM,UAAN,EAAkB,OAAlB;IACA,KAAK,OAAL,GAAe,OAAf;IACA,KAAK,cAAL,GAAsB,UAAU,CAAC,cAAjC;EACD;;EAEQ,OAAO,CACd,MADc,EAEd,OAFc,EAGd,QAHc,EAGY;IAE1B,MAAM,GAAG,GAAa;MAAE,KAAK,EAAE,KAAK;IAAd,CAAtB;;IAEA,IAAI,OAAO,KAAK,OAAL,CAAa,SAApB,KAAkC,QAAtC,EAAgD;MAC9C,GAAG,CAAC,SAAJ,GAAgB,KAAK,OAAL,CAAa,SAA7B;IACD,CANyB,CAQ1B;IACA;;;IACA,IAAI,KAAK,OAAL,CAAa,OAAb,KAAyB,SAA7B,EAAwC;MACtC,GAAG,CAAC,OAAJ,GAAc,KAAK,OAAL,CAAa,OAA3B;IACD;;IAED,MAAM,cAAN,CAAqB,MAArB,EAA6B,OAA7B,EAAsC,GAAtC,EAA2C,CAAC,GAAD,EAAM,QAAN,KAAkB;MAC3D,IAAI,GAAJ,EAAS;QACP,QAAQ,CAAC,GAAD,CAAR;QACA;MACD;;MAED,QAAQ,CAAC,SAAD,EAAY,CAAA,QAAQ,KAAA,IAAR,IAAA,QAAQ,KAAA,KAAA,CAAR,GAAQ,KAAA,CAAR,GAAA,QAAQ,CAAE,CAAV,KAAe,CAA3B,CAAR;IACD,CAPD;EAQD;;AAnC0E;;AAA7E,OAAA,CAAA,+BAAA,GAAA,+BAAA;AAsCA,CAAA,GAAA,WAAA,CAAA,aAAA,EAAc,+BAAd,EAA+C,CAC7C,WAAA,CAAA,MAAA,CAAO,cADsC,EAE7C,WAAA,CAAA,MAAA,CAAO,SAFsC,EAG7C,WAAA,CAAA,MAAA,CAAO,eAHsC,CAA/C","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EstimatedDocumentCountOperation = void 0;\nconst command_1 = require(\"./command\");\nconst operation_1 = require(\"./operation\");\n/** @internal */\nclass EstimatedDocumentCountOperation extends command_1.CommandOperation {\n    constructor(collection, options = {}) {\n        super(collection, options);\n        this.options = options;\n        this.collectionName = collection.collectionName;\n    }\n    execute(server, session, callback) {\n        const cmd = { count: this.collectionName };\n        if (typeof this.options.maxTimeMS === 'number') {\n            cmd.maxTimeMS = this.options.maxTimeMS;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (this.options.comment !== undefined) {\n            cmd.comment = this.options.comment;\n        }\n        super.executeCommand(server, session, cmd, (err, response) => {\n            if (err) {\n                callback(err);\n                return;\n            }\n            callback(undefined, (response === null || response === void 0 ? void 0 : response.n) || 0);\n        });\n    }\n}\nexports.EstimatedDocumentCountOperation = EstimatedDocumentCountOperation;\n(0, operation_1.defineAspects)(EstimatedDocumentCountOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]);\n//# sourceMappingURL=estimated_document_count.js.map"]},"metadata":{},"sourceType":"script"}